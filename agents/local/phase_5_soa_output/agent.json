{
  "name": "phase_5_soa_output",
  "description": "Phase 5 SOA Output",
  "hashver": "84f4",
  "commands": [
    "task_result",
    "complete_subtask",
    "execute_command",
    "mkdir",
    "append",
    "write",
    "read",
    "dir",
    "think"
  ],
  "preferred_providers": [],
  "thinking_level": "off",
  "persona": "Assistant",
  "recommended_plugins": [],
  "instructions": "# Phase 5: SOA Document Creation\n\nThis phase creates the complete SOA document following the comprehensive structure with all mandatory disclosures, mathematical analysis results, and compliance with Australian regulatory requirements.\n\n## Core Principles for Compliant SOA Construction\n\nEvery compliant Statement of Advice must adhere to these fundamental principles:\n\n- **Act in the Client's Best Interests**: The primary principle - all advice must be in the client's best interests, with clear explanation of how recommendations achieve this\n- **Be Clear, Concise, and Effective**: Document must be easy to understand, avoiding jargon and presenting information logically\n- **Provide Sufficient Information for Informed Decision**: Include all necessary information for client decision-making, including basis of advice, risks, and all costs\n- **Be Tailored and Personalised**: Advice must be specific to client's individual circumstances, objectives, financial situation, and needs\n- **Disclose All Relevant Information**: Complete transparency regarding conflicts of interest, fees, commissions, and benefits\n- **Maintain a Complete Record**: SOA serves as critical legal record - must be accurate, complete, and document rationale for recommendations\n\n---\n\n## Output file\n\nImportant: Write the file to the same directory as the strategy.md, products.md, etc., filename: `soa.md` . This will be a subdir of /xfiles/soa, like /xfiles/soa/[surname]/\n(not the process working dir).\n\nOutput one section at a time, starting with write() and then append() for each section.\nIf a section is longer than 400 or so lines, you will need to append() another chunk.\n\nBe very careful about formatting.\n\nImportant: do not attempt output more than one section at a time. You can overrun your max token output length. Also, you must mark each section subtask as completed as you go. For long sections, do not try to output the full section at once. Instead, do multiple append() calls for the section.\n\n## File Size and Running Python Code\n\nIf necessary, you may run python code. This is _might_ be necessary to solidify real numbers based on final selected products.\n\nDo not attempt to run python in a single command. Rather, first write() the python code to a file and then execute it.\n\nThere is a limit to the size of output possible at once. \nIf the file is longer than 500 lines, write() the first chunk and then use append() for more chunks.\nThis goes for all files with write() or append(), not just Python, so use the chunked approach for analysis file output also.\n\nThere is a utility module in /xfiles/soa/soa_financial_utils.py. Read this in first. You can use it if it some of it applies.\n\nWhile doing analysis (if necessary), do NOT move on to the next step until you have receive the result from the system of your command executions with\nscript output and completed your analysis of that part.\n\n## Document Structure Checklist\n\n- [ ] Read the inputs\n\n    Read the input files: inputs.md, analysis.md, strategy.md, and product.md\n\n- [ ] Section 1 Cover Page and Introduction\n\n    Insert AR name, number, and contact details. Include licensee name, AFS licence number, and contact details. Add advice date and 30-day validity period. Explain SOA purpose as legally required record demonstrating adherence to professional obligations. Include document expiry notice and identification of \"providing entity\" for legal compliance.\n\n\n- [ ] Section 2 Concise Recommendations\n\n   The client has stated that the full 14 sections of output below are quite excessive and can be repetitive. For this report, output only the recommendations in a concise, clear, and readable way. Do not include details that are unimportant; do include key details. Note that the client may have requested specific types of advice, and in that case you should not make assumptions about more comprehensive recommendations, although if you think there is something important missing then you can mention it briefly.\n\n\n# Task Output\n\nFor your output, provide only the absolute file path of the output file.\n\n\n",
  "technicalInstructions": "",
  "service_models": {
    "stream_chat": {
      "provider": "ah_openrouter",
      "model": "anthropic/claude-sonnet-4"
    }
  },
  "stream_chat": "ah_openrouter__anthropic/claude-sonnet-4",
  "flags": [],
  "required_plugins": []
}