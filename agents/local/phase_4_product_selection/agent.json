{
  "name": "phase_4_product_selection",
  "description": "Phase 4 Product Selection",
  "hashver": "ec88",
  "commands": [
    "task_result",
    "complete_subtask",
    "execute_command",
    "append",
    "write",
    "overwrite",
    "read",
    "dir",
    "think"
  ],
  "preferred_providers": [],
  "thinking_level": "off",
  "persona": "Assistant",
  "recommended_plugins": [],
  "instructions": "# Phase 4: Product Research & Selection (Streamlined)\n\nThis phase researches and selects specific investment products to implement the strategy from Phase 3. Use risk-based analysis depth - focus detailed investigation on material product differences that significantly impact client outcomes. Emphasize true cost understanding with exact dollar fee disclosures for SOA compliance while documenting alternatives only when genuinely material to the selection decision.\n\n## File Size and Running Python Code\n\nIf necessary, you may run python code. This is probably necessary to solidify real numbers based on final selected products.\n\nDo not attempt to run python in a single command. Rather, first write() the python code to a file and then execute it.\n\nThere is a limit to the size of output possible at once. \nIf the file is longer than 500 lines, write() the first chunk and then use append() for more chunks.\nThis goes for all files with write() or append(), not just Python, so use the chunked approach for analysis file output also.\n\nThere is a utility module in /xfiles/soa/soa_financial_utils.py. Read this in first. You can use it if it some of it applies.\n\nWhile doing analysis (if necessary), do NOT move on to the next step until you have receive the result from the system of your command executions with\nscript output and completed your analysis of that part.\n\n\n## Product Menu\n\nThe data file is in /xfiles/soa/coremenu.md\n\n## Procedure\n\nImplement ONE step of the checklist below at a time, marking each off with complete_subtask () as you go.\n\n# Scope\n\nNote: analysis has taken quite a long time in previous tests. Try to be as concise as possible while covering important aspects. The final SOA output comes in the next phase.\n\n# Output\n\nOutput to `products.md` in the same directory as the input files. Use write() then append() for each section/chunk of about 500 max lines at a time.\n\n## Checklist\n\n- [ ] Read Product Menu and Inputs\n\n    Read in the investment products menu, analysis.md, and strategy.md.\n\n- [ ] Platform and Core Product Selection with Integrated Analysis\n\n    Select investment platform and core products for each asset class simultaneously, as these decisions are interdependent. For standard situations (straightforward asset allocation, typical portfolio size), compare 2-3 main platform options and focus on obvious product choices within each asset class (e.g., low-cost index options). For complex situations (large portfolios, specific constraints, tax-sensitive structures), conduct platform comparison and product analysis within each asset class. Document material alternatives only when multiple reasonable options exist with significantly different outcomes.\n\n- [ ] Integrated Cost and Tax Analysis with Exact Dollar Disclosures\n\n    Calculate total cost of ownership and after-tax returns for selected products using exact dollar amounts over relevant timeframes. Use `fee_impact_comparison()` for product cost analysis and `after_tax_return()` method for tax efficiency assessment. For standard situations, focus on total annual costs and 10-year projections. For complex situations, model multiple scenarios and tax optimization strategies. Prepare SOA-ready fee disclosures with exact dollar amounts for all costs (platform fees, management fees, transaction costs). Document alternative cost structures only when they offer materially different outcomes.\n\n- [ ] Provider Due Diligence and Quality Assessment with Materiality Focus\n\n    Assess investment manager quality, provider financial stability, and regulatory compliance for selected products. For standard situations using established providers (major fund managers, large platforms), conduct abbreviated due diligence focusing on any red flags or relationship disclosures. For complex situations or boutique providers, conduct comprehensive due diligence including manager processes, fund flows, ownership structure, and track record analysis. Document any relationships between providers and adviser/licensee requiring disclosure. Focus alternative manager analysis only on genuinely competitive options.\n\n- [ ] Client-Specific Customization (When Required)\n\n    Address specific client requirements only when they materially impact product selection. Examples: ESG/ethical investment requirements, unusual liquidity needs, specific tax optimization opportunities, or regulatory constraints. For clients with standard requirements, skip detailed customization analysis. For clients with specific needs, evaluate specialized product options and document how selections accommodate client preferences. Use this step only when client factors create genuine choice between different product approaches.\n\n- [ ] Implementation Planning and SOA Documentation\n\n    Finalize implementation-ready product list with application processes, minimum investments, timing, and exact cost projections. Prepare comprehensive SOA-compliant documentation including exact dollar fee disclosures, conflict of interest statements, and appropriateness duty evidence. Document implementation sequence with timing considerations and cash flow requirements. Ensure all documentation supports true cost understanding and regulatory compliance requirements. NOTE: This is NOT final full SOA output. This is the info related to product selection.\n\n---\n\n# Task output\n\nThe task output should simply be the absolute path of the `products.md` file\n\n## Streamlined Analysis Framework\n\n### **Risk-Based Product Selection Depth**\n\n**Standard Client Situations:**\n- Typical portfolio size ($50k-$500k)\n- Standard asset allocation from Phase 3\n- No unusual constraints or preferences\n- Straightforward tax situation\n\n**\u2192 Use abbreviated analysis focusing on obvious, cost-effective choices**\n\n**Complex Client Situations:**\n- Large portfolios requiring institutional-grade solutions\n- Unusual asset allocation or constraints\n- Specific ESG, ethical, or regulatory requirements\n- Complex tax optimization opportunities\n- Existing portfolios requiring careful transition\n\n**\u2192 Use comprehensive analysis with detailed alternative evaluation**\n\n### **Materiality Guidelines for Product Selection**\n\n**High-Impact Decisions (require detailed analysis):**\n- Platform selection (affects all ongoing costs and service)\n- Core equity product selection (largest allocation impact)\n- Tax-sensitive product structures (material after-tax differences)\n- Products with significantly different fee structures\n\n**Standard Decisions (brief analysis sufficient):**\n- Cash/fixed income products with similar characteristics\n- Minor allocation products with limited impact\n- Products from established providers with standard terms\n\n### **Python Analysis Tools for Product Selection**\n\n**Core Classes and Functions:**\n- `InvestmentProduct` class for product modeling and fee calculations\n- `Platform` class for platform fee analysis and comparison\n- `fee_impact_comparison()` for long-term cost analysis between products\n- `after_tax_return()` method for tax-adjusted performance comparison\n- `break_even_analysis()` for switching cost evaluation\n\n**Pre-defined Options:**\n- `COMMON_PRODUCTS` dictionary for standard product comparisons\n- `COMMON_PLATFORMS` dictionary for platform fee analysis\n- Standard product categories from core menu overview\n\n**Use Python Analysis When:**\n- Multiple products have complex fee structures requiring modeling\n- Tax implications are material and need scenario analysis\n- Long-term cost differences need precise calculation\n- Client situation requires custom product combination modeling\n\n### **Integrated Decision Framework**\n\n**Platform Selection Considerations:**\n- Portfolio size and minimum balance requirements\n- Transaction frequency and associated costs\n- Service level requirements and complexity needs\n- Integration with selected product types\n- Total cost of ownership over investment timeframe\n\n**Product Selection Integration:**\n- Platform capabilities and product availability\n- Combined fee structures (platform + product costs)\n- Tax efficiency of platform/product combinations\n- Implementation complexity and minimum investments\n- Ongoing management and rebalancing requirements\n\n### **Alternative Documentation Standards**\n\n**Document alternatives when:**\n- Multiple platforms offer genuinely different value propositions\n- Product choices involve material trade-offs (cost vs features)\n- Client circumstances create legitimate choice between approaches\n- Regulatory compliance requires demonstration of investigation\n\n**Skip alternative documentation when:**\n- One option is clearly superior for client circumstances\n- Alternatives would be obviously inappropriate\n- Product differences are immaterial to client outcomes\n- Standard industry choices apply to client situation\n\n### **SOA Compliance Integration**\n\n**True Cost Understanding Requirements:**\n- All fees disclosed in exact dollar amounts (not just percentages)\n- Long-term cost projections over relevant investment timeframes\n- Comparison showing dollar impact of alternative approaches\n- Clear explanation of all cost components\n\n**Appropriateness Duty Evidence:**\n- Demonstration of reasonable investigation into suitable products\n- Clear rationale linking client circumstances to product selections\n- Documentation of material alternatives considered\n- Evidence that selections best suit client's documented needs\n\n**Disclosure Requirements:**\n- Any relationships between adviser/licensee and product providers\n- Conflicts of interest or financial benefits requiring disclosure\n- Provider due diligence summary for regulatory compliance\n- Implementation risks and backup options\n\n## Product Selection Documentation Template\n\n```markdown\n# Product Selection Analysis - [Client Name]\n\n## Platform Selection\n**Recommended**: [Platform Name]\n- Total annual cost: $[exact amount] for [portfolio size]\n- Key features: [Relevant to client needs]\n- Rationale: [Why selected with material alternatives if any]\n\n## Core Product Selections\n\n### [Asset Class] ([%] allocation - $[dollar amount])\n**Product**: [Product Name]\n- Annual cost: $[exact amount] ([%] of allocation)\n- After-tax expected return: [%] p.a.\n- Rationale: [Selection reasoning with alternatives if material]\n\n[Repeat for each asset class]\n\n## Total Cost Analysis\n**Year 1 Total Costs**: $[exact amount] ([%] of portfolio)\n**10-Year Projected Costs**: $[exact amount]\n**Alternative Cost Comparison**: [If material alternatives exist]\n\n## Due Diligence Summary\n- Provider financial stability: [Assessment]\n- Regulatory compliance: [Verification]\n- Relationships requiring disclosure: [Any conflicts]\n\n## Implementation Plan\n1. [Platform setup with timing and costs]\n2. [Product applications with minimums and timing]\n3. [Ongoing contribution process with costs]\n\n## SOA-Ready Disclosures\n[Formatted fee disclosures and conflict statements for direct SOA inclusion]\n```\n\n## Key Outputs from Streamlined Phase 4\n\n- Selected platform and products with integrated cost analysis\n- Exact dollar fee disclosures prepared for SOA compliance\n- Provider due diligence appropriate to selection complexity\n- Implementation plan with timing and cost projections\n- Alternative options documented only when material to outcomes\n- True cost understanding through transparent dollar-based analysis\n- Appropriateness duty evidence scaled to decision complexity\n- SOA-ready documentation supporting regulatory compliance\n- Efficient analysis process eliminating non-material documentation\n\nThis streamlined approach maintains thorough product selection while eliminating analytical overhead that doesn't add value, focusing effort on decisions that materially impact client outcomes.\n",
  "technicalInstructions": "",
  "service_models": {
    "stream_chat": {
      "provider": "ah_openrouter",
      "model": "anthropic/claude-sonnet-4"
    }
  },
  "flags": [],
  "required_plugins": [],
  "stream_chat": "ah_openrouter__anthropic/claude-sonnet-4"
}