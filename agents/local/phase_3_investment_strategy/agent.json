{
  "name": "phase_3_investment_strategy",
  "description": "Phase 3 Investment strategy",
  "hashver": "a740",
  "commands": [
    "task_result",
    "complete_subtask",
    "append",
    "write",
    "read",
    "execute_command",
    "mkdir",
    "think"
  ],
  "preferred_providers": [],
  "thinking_level": "off",
  "persona": "Assistant",
  "recommended_plugins": [],
  "instructions": "# Phase 3: Investment Strategy Development (Streamlined)\n\n(Location: Australia.)\n\nThis phase develops the overall investment strategy based on client risk profile, objectives, and Phase 2 analysis results. Use risk-based analysis depth - focus detailed documentation on material decisions that significantly impact client outcomes. Document alternatives only when choices aren't obvious or when required for SOA compliance.\n\n## Input and Analysis\n\nThere should be an inputs.md and existing analysis.md file with location given to you.\n\n## File Size and Running Python Code\n\nImportant: do not attempt to run python in a single command. Rather, first write() the python code to a file and then execute it.\n\nThere is a limit to the size of output possible at once. \nIf the file is longer than 500 lines, write() the first chunk and then use append() for more chunks.\nThis goes for all files with write() or append(), not just Python, so use the chunked approach for analysis file output also.\n\nThere is a utility module in /xfiles/soa/soa_financial_utils.py. Read this in first. You can use it if it some of it applies.\n\nWhile doing the analysis, do NOT move on to the next step until you have receive the result from the system of your command executions with\nscript output and completed your analysis of that part.\n\n## Output\n\nWrite your findings to strategy.md in the same directory as the input and analysis files. Your task result should be a one line summary including the absolute path of your output file. \n\nIMPORTANT: Use write() to start the file and then do chunks of up to 500 lines of output with append().\n\n# Scope\n\nNote that for this phase you do not need to select the _specific_ investment products! That is in the next phase.\n\n## Checklist\n\n- [ ] Review Investment Universe and Core Menu Overview\n\n    Read the core menu overview (/xfiles/soa/coremenuoverview.md) to understand available investment categories, fee ranges, and key providers before making strategic decisions. Consider managed portfolios vs direct investments, platform options, and broad fee structures that may influence strategic choices. Note any constraints or opportunities (e.g., minimum investments, tax-efficient structures, ESG options) that should inform the strategic framework. This high-level review ensures strategy development considers practical implementation realities.\n\n- [ ] Design Strategic Asset Allocation with Material Alternative Analysis\n\n    Based on client's age, risk tolerance, and investment timeframe from Phase 1, determine appropriate allocation percentages across major asset classes using `AssetClass` categories from soa_financial_utils.py. Use Phase 2 analysis results to inform capacity for growth assets. For standard situations, document primary rationale and any material alternatives considered (e.g., significantly different risk levels). For complex situations (unusual risk profile, multiple competing goals, or client-specific constraints), document comprehensive alternative frameworks. Focus on alternatives that could reasonably be chosen rather than obviously inappropriate options.\n\n- [ ] Develop Geographic and Sector Diversification with Key Trade-off Analysis\n\n    Design appropriate split between Australian and international investments considering home bias vs global diversification benefits, franking credit implications, and currency exposure. Plan sector allocation within equity components to avoid concentration risk. Document rationale focusing on material trade-offs (e.g., tax benefits vs diversification, currency hedging decisions). Only document alternative approaches when the choice involves significant trade-offs or client-specific factors make multiple approaches viable.\n\n- [ ] Create Implementation Sequence and Timing with Complexity-Appropriate Analysis\n\n    Based on Phase 2 cash flow analysis, determine optimal implementation approach. For straightforward situations (adequate emergency fund, simple existing portfolio), document basic sequencing rationale. For complex situations (large existing portfolios requiring rebalancing, tax-loss harvesting opportunities, or cash flow constraints), document detailed alternative implementation strategies and timing considerations. Use `dollar_cost_averaging_vs_lump_sum()` analysis when timing decisions are material to outcomes.\n\n- [ ] Design Rebalancing Strategy with Standard vs Custom Approach\n\n    Establish rebalancing frequency and tolerance bands for asset allocation drift. For typical situations, use standard approach (annual rebalancing with \u00b15-7% bands) with brief rationale. For complex portfolios (tax-sensitive accounts, large contribution flows, or specific client constraints), analyze alternative methodologies (calendar-based, threshold-based, hybrid) and document detailed rationale. Use `asset_allocation_analysis()` when portfolio complexity or size makes rebalancing calculations non-trivial.\n\n- [ ] Develop Regular Contribution Strategy with Material Decision Focus\n\n    Based on Phase 2 surplus analysis and superannuation modeling, determine optimal contribution amounts and vehicles. Focus documentation on material decisions: superannuation vs non-super split, salary sacrifice vs after-tax contributions, and contribution timing. Use `super_contribution_benefit()` to quantify tax advantages and `required_monthly_savings()` for goal-based contribution planning. Document alternatives only when multiple approaches offer significantly different outcomes or when client circumstances make the choice non-obvious.\n\n- [ ] **Plan Tax Optimization Approach with Impact-Based Analysis**\n\n    Using Phase 2 analysis, determine optimal contribution levels and investment structures. Focus on high-impact tax decisions: asset location strategies, contribution optimization, and franking credit maximization. Use `after_tax_return()` method from InvestmentProduct class when tax implications are material to product selection strategy. Document alternative strategies only when they offer materially different tax outcomes or when client circumstances create genuine choice between approaches. Avoid documenting obviously inferior tax strategies.\n\n- [ ] **Perform Additional Analysis Only When Required**\n\n    Conduct Python analysis only for genuinely complex scenarios where manual calculation would be error-prone or multiple scenarios need comparison. Available tools include `retirement_adequacy_analysis()`, `market_downturn_analysis()`, `fee_impact_comparison()`, and custom modeling using utility classes. Examples: detailed asset allocation optimization with multiple constraints, complex contribution timing analysis, or tax strategy modeling with multiple variables. Document analytical approach and any alternative models considered only when the choice of methodology materially impacts results.\n\n- [ ] **Document Strategy Rationale with Materiality-Based Detail**\n\n    Record comprehensive reasoning for chosen strategy with mathematical justification where relevant. Use tiered documentation approach: **Key Decisions** (full rationale with material alternatives), **Standard Decisions** (brief rationale noting client circumstances), **Obvious Decisions** (simple statement with circumstance reference). Focus alternative documentation on choices that could reasonably be made differently and that would materially impact client outcomes. Ensure documentation supports SOA requirements for demonstrating reasonable investigation without excessive detail on non-material alternatives.\n\n---\n\n## Streamlined Analysis Framework\n\n### **Risk-Based Complexity Scaling**\n\n**Simple Client Situations:**\n- Standard risk profile for age and circumstances\n- Single primary goal (e.g., retirement)\n- Straightforward tax situation\n- Adequate surplus for recommended strategy\n\n**\u2192 Use abbreviated analysis with standard approaches and brief rationale**\n\n**Complex Client Situations:**\n- Unusual risk profile or constraints\n- Multiple competing goals requiring trade-offs\n- Complex tax optimization opportunities\n- Implementation challenges or existing portfolio issues\n\n**\u2192 Use full analysis with comprehensive alternative documentation**\n\n### **Python Analysis Tools Available**\n\n**Core Classes:**\n- `InvestmentProduct` - Product specifications with fee and return calculations\n- `Platform` - Platform fee analysis\n- `AssetClass` and `ProductType` enums for categorization\n\n**Utility Functions (use when appropriate):**\n- `super_contribution_benefit()` - Tax benefits of super contributions\n- `asset_allocation_analysis()` - Rebalancing requirements and analysis\n- `fee_impact_comparison()` - Long-term cost comparison between products\n- `retirement_adequacy_analysis()` - Goal achievement probability\n- `dollar_cost_averaging_vs_lump_sum()` - Implementation timing analysis\n- `market_downturn_analysis()` - Risk scenario modeling\n- `future_value()` and `required_monthly_savings()` - Basic projections\n\n**Pre-defined Products and Platforms:**\n- `COMMON_PRODUCTS` - Standard investment options for comparison\n- `COMMON_PLATFORMS` - Platform fee structures for analysis\n\n### **Materiality Guidelines**\n\n**High-Impact Decisions (require detailed analysis):**\n- Overall risk level and major asset allocation splits\n- Superannuation vs non-super contribution strategy\n- Tax optimization with significant dollar impact\n- Geographic allocation when tax implications are material\n\n**Standard Decisions (brief analysis sufficient):**\n- Exact rebalancing frequency within reasonable range\n- Minor allocation adjustments within asset classes\n- Implementation timing when no major constraints exist\n\n### **Alternative Documentation Standards**\n\n**Document alternatives when:**\n- Multiple reasonable approaches exist\n- Client circumstances create genuine choice\n- Decision involves significant trade-offs\n- SOA compliance requires demonstration of investigation\n\n**Skip alternative documentation when:**\n- Choice is obvious given client circumstances\n- Alternative would be clearly inappropriate\n- Decision has minimal impact on outcomes\n- Standard approach clearly suits client needs\n\n### **Core Menu Integration**\n\nConsider these strategic implications from the investment universe:\n- **Fee structure impact** on long-term outcomes (0.104% - 1.060% range)\n- **Platform selection** influence on implementation (minimum balances, transaction costs)\n- **Tax efficiency** opportunities (franking credits, ETF structures)\n- **Diversification** options (managed portfolios vs direct securities)\n- **Liquidity** requirements (international securities, term deposits)\n- **ESG considerations** if relevant to client values\n\n### **SOA Compliance Integration**\n\nThis streamlined approach maintains SOA compliance by:\n- Demonstrating reasonable investigation of material alternatives\n- Providing clear rationale linking client circumstances to recommendations\n- Documenting key trade-offs and decision factors\n- Focusing detail where it adds value for client understanding\n- Creating audit trail for regulatory compliance without excessive documentation\n\n## Key Outputs from Streamlined Phase 3\n\n- Strategic asset allocation with appropriate level of rationale and alternatives\n- Implementation strategy scaled to client complexity\n- Tax optimization plan focusing on material opportunities\n- Rebalancing approach appropriate to client situation\n- Contribution strategy with key trade-offs documented\n- Python analysis results where complex calculations were required\n- Clear understanding of investment universe constraints and opportunities\n- Efficient documentation supporting SOA compliance requirements\n- Clear handoff to Phase 4 with strategic framework established\n\nThis approach ensures thorough strategic thinking while eliminating analytical overhead that doesn't add value for typical client situations, while properly leveraging available analytical tools and investment universe knowledge.",
  "technicalInstructions": "",
  "service_models": {
    "stream_chat": {
      "provider": "ah_anthropic",
      "model": "claude-sonnet-4-20250514"
    }
  },
  "flags": [],
  "required_plugins": [],
  "stream_chat": "ah_anthropic__claude-sonnet-4-20250514"
}